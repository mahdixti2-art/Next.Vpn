<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextVPN | Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;400;700;900&display=swap');
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #020617;
            color: #e2e8f0;
        }
        .animate-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #0ea5e9;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(14, 165, 233, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [step, setStep] = useState(1);
            const [months, setMonths] = useState(1);
            const [volume, setVolume] = useState(10);
            const [contact, setContact] = useState('');
            const [receiptImage, setReceiptImage] = useState(null);
            const [previewUrl, setPreviewUrl] = useState(null);
            const [loading, setLoading] = useState(false);
            const [isSuccess, setIsSuccess] = useState(false);

            // Settings
            const BOT_TOKEN = "8302811186:AAEMBp9XhMGiW4WaBNF-F59BeDGa_gHV1To";
            const CHAT_ID = "8474397291";
            const CARD_NUMBER = "6219861908913584"; 
            const CARD_NAME = "Ù…Ù„ÛŒØ­Ù‡ Ù…Ø®ØªØ§Ø±ÛŒ";

            const BASE_PRICE = 30000;
            const PER_GB = 5000;
            const totalPrice = (months * BASE_PRICE) + (volume * PER_GB);

            const handleImageChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    setReceiptImage(file);
                    setPreviewUrl(URL.createObjectURL(file));
                }
            };

            const copyToClipboard = () => {
                navigator.clipboard.writeText(CARD_NUMBER);
                alert("Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ú©Ù¾ÛŒ Ø´Ø¯!");
            };

            const sendToTelegram = async () => {
                const caption = `ğŸš€ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯\n\nğŸ“… Ù…Ø¯Øª: ${months} Ù…Ø§Ù‡\nğŸ’¾ Ø­Ø¬Ù…: ${volume} Ú¯ÛŒÚ¯\nğŸ’° Ù…Ø¨Ù„Øº: ${totalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†\nğŸ‘¤ Ù…Ø´ØªØ±ÛŒ: ${contact}`;
                
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('caption', caption);
                formData.append('photo', receiptImage);

                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
            };

            const handleSubmit = async () => {
                if (!receiptImage || !contact) return;
                setLoading(true);
                try {
                    await sendToTelegram();
                    setIsSuccess(true);
                } catch (e) {
                    alert("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø±Ø³ÛŒØ¯. Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.");
                }
                setLoading(false);
            };

            const resetAll = () => {
                setStep(1);
                setMonths(1);
                setVolume(10);
                setContact('');
                setReceiptImage(null);
                setPreviewUrl(null);
                setIsSuccess(false);
            };

            if (isSuccess) return (
                <div className="min-h-screen flex items-center justify-center p-6 animate-in">
                    <div className="bg-slate-900/80 border border-emerald-500/30 p-10 rounded-[3rem] text-center max-w-sm w-full">
                        <div className="text-6xl mb-6">âœ…</div>
                        <h2 className="text-2xl font-bold text-white mb-4">Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!</h2>
                        <p className="text-slate-400 text-sm mb-8">Ø±Ø³ÛŒØ¯ Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. Ø§Ú©Ø§Ù†Øª Ø´Ù…Ø§ Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
                        <button onClick={resetAll} className="w-full bg-slate-800 py-4 rounded-2xl font-bold">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø§ÛŒØª</button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen p-4 md:p-10">
                    <div className="max-w-xl mx-auto">
                        <header className="text-center mb-10">
                            <h1 className="text-4xl font-black text-white italic tracking-tighter">NEXT<span className="text-sky-500">VPN</span></h1>
                            <p className="text-slate-500 text-xs mt-2 font-bold uppercase tracking-widest">Premium Proxy Service</p>
                        </header>

                        <div className="bg-slate-900/50 border border-slate-800 rounded-[2.5rem] overflow-hidden backdrop-blur-xl shadow-2xl">
                            {/* Stepper */}
                            <div className="flex bg-slate-950/50 border-b border-slate-800 text-[10px] font-bold text-slate-500">
                                <div className={`flex-1 py-4 text-center ${step === 1 ? 'text-sky-500 bg-sky-500/5 border-b border-sky-500' : ''}`}>Û±. Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±ÙˆÛŒØ³</div>
                                <div className={`flex-1 py-4 text-center ${step === 2 ? 'text-sky-500 bg-sky-500/5 border-b border-sky-500' : ''}`}>Û². Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</div>
                                <div className={`flex-1 py-4 text-center ${step === 3 ? 'text-sky-500 bg-sky-500/5 border-b border-sky-500' : ''}`}>Û³. Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‡Ø§ÛŒÛŒ</div>
                            </div>

                            <div className="p-8 md:p-12">
                                {step === 1 && (
                                    <div className="space-y-10 animate-in">
                                        <div className="space-y-6">
                                            <div className="flex justify-between items-center"><span className="text-sm font-bold text-slate-400">Ù…Ø¯Øª Ø§Ø¹ØªØ¨Ø§Ø±:</span><span className="text-xl font-black text-white">{months} Ù…Ø§Ù‡Ù‡</span></div>
                                            <input type="range" min="1" max="12" value={months} onChange={(e)=>setMonths(e.target.value)} className="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer" />
                                        </div>
                                        <div className="space-y-6">
                                            <div className="flex justify-between items-center"><span className="text-sm font-bold text-slate-400">Ø­Ø¬Ù… ØªØ±Ø§ÙÛŒÚ©:</span><span className="text-xl font-black text-white">{volume} Ú¯ÛŒÚ¯</span></div>
                                            <input type="range" min="5" max="500" step="5" value={volume} onChange={(e)=>setVolume(e.target.value)} className="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer" />
                                        </div>
                                        <div className="bg-slate-950 p-6 rounded-3xl border border-slate-800 flex justify-between items-center">
                                            <span className="text-slate-500 text-xs font-bold">Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ:</span>
                                            <div className="text-left"><span className="text-3xl font-black text-sky-500">{totalPrice.toLocaleString()}</span> <span className="text-[10px] text-slate-600">ØªÙˆÙ…Ø§Ù†</span></div>
                                        </div>
                                        <button onClick={()=>setStep(2)} className="w-full bg-sky-600 hover:bg-sky-500 py-5 rounded-2xl font-bold flex justify-center items-center gap-2 transition-all">ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ø¯Ø§Ù…Ù‡ â”</button>
                                    </div>
                                )}

                                {step === 2 && (
                                    <div className="space-y-8 animate-in">
                                        <div className="space-y-4">
                                            <h3 className="text-xl font-bold">Ú©Ø¬Ø§ Ø§Ú©Ø§Ù†Øª Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒÙ…ØŸ</h3>
                                            <p className="text-slate-500 text-sm">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ ÛŒØ§ Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</p>
                                            <input type="text" value={contact} onChange={(e)=>setContact(e.target.value)} placeholder="@User_ID ÛŒØ§ 0912..." className="w-full bg-slate-950 border border-slate-800 rounded-2xl p-5 outline-none focus:border-sky-500 text-white" />
                                        </div>
                                        <button onClick={()=>setStep(3)} className="w-full bg-sky-600 py-5 rounded-2xl font-bold">Ù…Ø±Ø­Ù„Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª</button>
                                        <button onClick={()=>setStep(1)} className="w-full text-slate-600 text-xs">Ø¨Ø§Ø²Ú¯Ø´Øª Ùˆ Ø§ØµÙ„Ø§Ø­</button>
                                    </div>
                                )}

                                {step === 3 && (
                                    <div className="space-y-8 animate-in">
                                        <div className="bg-slate-950 p-6 rounded-[2.5rem] border border-slate-800 text-center space-y-4">
                                            <div className="text-[10px] text-slate-500 font-bold tracking-widest">Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ø¬Ù‡Øª ÙˆØ§Ø±ÛŒØ²</div>
                                            <div className="text-xl font-black text-white tracking-widest">{CARD_NUMBER}</div>
                                            <div className="text-xs text-slate-400 font-bold">Ø¨Ù‡ Ù†Ø§Ù…: {CARD_NAME}</div>
                                            <button onClick={copyToClipboard} className="text-sky-500 text-[10px] font-bold hover:underline">Ú©Ù¾ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª</button>
                                        </div>

                                        <div className="space-y-4">
                                            <h3 className="text-sm font-bold text-slate-300">ğŸ“¸ Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³ Ø±Ø³ÛŒØ¯</h3>
                                            <div onClick={()=>document.getElementById('file-in').click()} className="border-2 border-dashed border-slate-800 rounded-3xl p-8 flex flex-col items-center gap-3 cursor-pointer hover:bg-slate-800/20 transition-all overflow-hidden min-h-[150px] justify-center text-center">
                                                {previewUrl ? <img src={previewUrl} className="h-32 object-contain" /> : <div className="text-slate-600 text-xs font-bold uppercase">Click to select photo</div>}
                                                <input type="file" id="file-in" hidden accept="image/*" onChange={handleImageChange} />
                                            </div>
                                        </div>

                                        <button disabled={loading || !receiptImage} onClick={handleSubmit} className={`w-full py-5 rounded-2xl font-bold flex justify-center items-center gap-2 ${loading || !receiptImage ? 'bg-slate-800 text-slate-600' : 'bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-900/20'}`}>
                                            {loading ? "Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„..." : "Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ Ùˆ Ø§Ø±Ø³Ø§Ù„"}
                                        </button>
                                        <button onClick={()=>setStep(2)} className="w-full text-slate-600 text-xs">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
